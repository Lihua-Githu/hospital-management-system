# 社区医院门诊管理系统 

- **GitHub仓库**：https://github.com/Lihua-Githu/hospital-management-system

---

## 一、项目概述

### 1.1 项目背景

随着社区医疗服务的快速发展,传统的纸质登记和人工管理方式已无法满足现代医院的管理需求。本系统旨在开发一套完整的社区医院门诊管理系统,实现患者预约挂号、现场就诊登记、费用结算、病历管理等全流程数字化管理。

### 1.2 项目目标

1. **提高工作效率**：通过信息化手段简化患者就诊流程,减少等待时间
2. **数据化管理**：实现医院运营数据的实时统计和分析
3. **多端访问**：支持本地和网络访问,方便多设备使用
4. **可视化展示**：通过图表直观展示就诊趋势和运营状况

### 1.3 技术栈

- **后端**：Python 3.13 + Flask 3.0.0
- **数据库**：SQLite 3
- **前端**：HTML5 + CSS3 + JavaScript (原生)
- **部署**：本地服务器 + 局域网访问
- **版本控制**：Git + GitHub

---

## 二、需求分析

### 2.1 用户角色分析

#### 角色1：患者

- **核心需求**：便捷的预约挂号、查询预约记录
- **操作场景**：在家预约、到院登记、缴费结算
- **关键指标**：操作简便性、响应速度

#### 角色2：前台人员

- **核心需求**：快速登记、预约验证、费用结算
- **操作场景**：患者到院接待、信息录入、收费管理
- **关键指标**：录入效率、信息准确性

#### 角色3：管理人员

- **核心需求**：数据统计、员工管理、排班安排
- **操作场景**：查看运营报表、管理医护人员、分析就诊趋势
- **关键指标**：数据准确性、分析深度

### 2.2 功能需求清单

#### 患者端功能

1. ✅ **预约挂号**：填写姓名、科室、联系方式、预约时间
2. ✅ **预约查询**：通过姓名和电话查询预约记录
3. ✅ **科室展示**：查看医院科室和医生信息

#### 前台端功能

1. ✅ **患者登记**：新患者信息录入系统
2. ✅ **预约验证**：验证预约信息并分配诊室
3. ✅ **就诊登记**：记录就诊信息到系统
4. ✅ **费用结算**：计算和收取就诊费用

#### 管理端功能

1. ✅ **数据统计**：今日就诊人次、收入、候诊人数
2. ✅ **趋势分析**：本周就诊趋势图表(可视化)
3. ✅ **员工管理**：医护人员信息管理
4. ✅ **排班管理**：医生出诊时间安排
5. ✅ **患者管理**：患者信息查询和管理

### 2.3 非功能需求

1. **性能要求**：页面响应时间 < 2秒
2. **并发支持**：支持至少10个并发用户
3. **数据安全**：敏感信息加密存储
4. **界面友好**：现代化商务风格设计
5. **跨平台**：支持PC端和移动端访问

---

## 三、数据库设计

### 3.1 E-R图设计

#### 核心实体

1. **患者 (Patient)**

   - 属性：患者ID、姓名、性别、身份证号、联系电话、地址、出生日期
2. **员工 (Employee)**

   - 属性：员工ID、姓名、性别、职位、科室ID、联系电话、入职日期
3. **科室 (Department)**

   - 属性：科室ID、科室名称、科室位置、科室电话
4. **预约 (Appointment)**

   - 属性：预约ID、患者ID、科室ID、预约时间、状态、备注
5. **就诊 (Visit)**

   - 属性：就诊ID、患者ID、医生ID、科室ID、诊室ID、就诊时间、状态
6. **收费 (Billing)**

   - 属性：账单ID、就诊ID、金额、支付方式、支付时间、状态

#### 实体关系

- 患者 1:N 预约(一个患者可以有多个预约)
- 患者 1:N 就诊(一个患者可以有多次就诊)
- 员工 N:1 科室(多个员工属于一个科室)
- 医生 1:N 就诊(一个医生接诊多个患者)
- 就诊 1:1 收费(一次就诊对应一笔费用)

### 3.2 关系模式设计

#### 3.2.1 科室表 (department)

```sql
CREATE TABLE department (
    dept_id INTEGER PRIMARY KEY AUTOINCREMENT,
    dept_name TEXT NOT NULL UNIQUE,
    location TEXT,
    phone TEXT
);
```

**字段说明**：

- `dept_id`：科室主键,自增
- `dept_name`：科室名称,唯一索引
- `location`：科室位置
- `phone`：联系电话

#### 3.2.2 员工表 (employee)

```sql
CREATE TABLE employee (
    emp_id INTEGER PRIMARY KEY AUTOINCREMENT,
    emp_name TEXT NOT NULL,
    gender TEXT,
    position TEXT,
    dept_id INTEGER,
    phone TEXT,
    hire_date DATE,
    FOREIGN KEY (dept_id) REFERENCES department(dept_id)
);
```

**关系约束**：

- 外键：`dept_id` → `department(dept_id)`

#### 3.2.3 患者表 (patient)

```sql
CREATE TABLE patient (
    patient_id INTEGER PRIMARY KEY AUTOINCREMENT,
    patient_name TEXT NOT NULL,
    gender TEXT,
    id_card TEXT UNIQUE,
    phone TEXT NOT NULL,
    address TEXT,
    birth_date DATE,
    registration_date DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

**索引设计**：

- 唯一索引：`id_card`(身份证号)
- 普通索引：`phone`(查询优化)

#### 3.2.4 预约表 (appointment)

```sql
CREATE TABLE appointment (
    appt_id INTEGER PRIMARY KEY AUTOINCREMENT,
    patient_id INTEGER,
    dept_id INTEGER,
    appt_time DATETIME,
    status TEXT DEFAULT '待到院',
    notes TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (patient_id) REFERENCES patient(patient_id),
    FOREIGN KEY (dept_id) REFERENCES department(dept_id)
);
```

**状态字段**：待到院、已到院、已取消

#### 3.2.5 就诊表 (visit)

```sql
CREATE TABLE visit (
    visit_id INTEGER PRIMARY KEY AUTOINCREMENT,
    patient_id INTEGER NOT NULL,
    doctor_id INTEGER,
    dept_id INTEGER,
    clinic_room_id INTEGER,
    visit_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    diagnosis TEXT,
    status TEXT DEFAULT '候诊',
    FOREIGN KEY (patient_id) REFERENCES patient(patient_id),
    FOREIGN KEY (doctor_id) REFERENCES employee(emp_id),
    FOREIGN KEY (dept_id) REFERENCES department(dept_id),
    FOREIGN KEY (clinic_room_id) REFERENCES clinic_room(room_id)
);
```

**状态流转**：候诊 → 就诊中 → 已完成 → 已结算

#### 3.2.6 收费表 (billing)

```sql
CREATE TABLE billing (
    bill_id INTEGER PRIMARY KEY AUTOINCREMENT,
    visit_id INTEGER NOT NULL,
    amount REAL NOT NULL,
    payment_method TEXT,
    payment_time DATETIME,
    status TEXT DEFAULT '未支付',
    FOREIGN KEY (visit_id) REFERENCES visit(visit_id)
);
```

#### 3.2.7 诊室表 (clinic_room)

```sql
CREATE TABLE clinic_room (
    room_id INTEGER PRIMARY KEY AUTOINCREMENT,
    room_number TEXT NOT NULL UNIQUE,
    dept_id INTEGER,
    status TEXT DEFAULT '空闲',
    FOREIGN KEY (dept_id) REFERENCES department(dept_id)
);
```

#### 3.2.8 医生排班表 (doctor_schedule)

```sql
CREATE TABLE doctor_schedule (
    schedule_id INTEGER PRIMARY KEY AUTOINCREMENT,
    doctor_id INTEGER NOT NULL,
    dept_id INTEGER,
    work_date DATE NOT NULL,
    start_time TEXT,
    end_time TEXT,
    status TEXT DEFAULT '正常',
    FOREIGN KEY (doctor_id) REFERENCES employee(emp_id),
    FOREIGN KEY (dept_id) REFERENCES department(dept_id)
);
```

#### 3.2.9 系统用户表 (system_user)

```sql
CREATE TABLE system_user (
    user_id INTEGER PRIMARY KEY AUTOINCREMENT,
    username TEXT NOT NULL UNIQUE,
    password TEXT NOT NULL,
    role TEXT NOT NULL,
    emp_id INTEGER,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (emp_id) REFERENCES employee(emp_id)
);
```

### 3.3 数据库规范化分析

#### 第一范式 (1NF)

✅ 所有表的属性都是原子值,不可再分

#### 第二范式 (2NF)

✅ 所有非主属性完全依赖于主键

- 例如：`patient` 表中,所有字段都完全依赖于 `patient_id`

#### 第三范式 (3NF)

✅ 消除传递依赖

- 例如：`employee` 表中,`dept_name` 不直接存储,而是通过 `dept_id` 关联

### 3.4 索引设计

```sql
-- 患者表索引
CREATE INDEX idx_patient_phone ON patient(phone);
CREATE INDEX idx_patient_idcard ON patient(id_card);

-- 预约表索引
CREATE INDEX idx_appt_time ON appointment(appt_time);
CREATE INDEX idx_appt_status ON appointment(status);

-- 就诊表索引
CREATE INDEX idx_visit_time ON visit(visit_time);
CREATE INDEX idx_visit_patient ON visit(patient_id);

-- 排班表索引
CREATE INDEX idx_schedule_date ON doctor_schedule(work_date);
CREATE INDEX idx_schedule_doctor ON doctor_schedule(doctor_id);
```

---

## 四、系统实现

### 4.1 技术架构

```
┌─────────────────────────────────────────┐
│           前端界面 (HTML/CSS/JS)         │
│  - 患者预约页面 (patient.html)          │
│  - 前台接待页面 (receptionist.html)     │
│  - 管理后台页面 (admin.html)            │
└──────────────┬──────────────────────────┘
               │ HTTP请求
               ▼
┌─────────────────────────────────────────┐
│        Flask Web框架 (app.py)           │
│  - 路由管理                             │
│  - API接口                              │
│  - 业务逻辑                             │
└──────────────┬──────────────────────────┘
               │ SQL查询
               ▼
┌─────────────────────────────────────────┐
│         SQLite数据库 (hospital.db)      │
│  - 9张数据表                            │
│  - 关系约束                             │
│  - 索引优化                             │
└─────────────────────────────────────────┘
```

### 4.2 核心功能实现

#### 4.2.1 患者预约功能

**API端点**：`POST /api/patient/appointment`

**实现逻辑**：

1. 接收患者信息和预约信息
2. 查找患者记录,不存在则创建
3. 创建预约记录
4. 返回预约成功信息

#### 4.2.2 前台接待功能

**API端点**：`POST /api/receptionist/register`

**实现逻辑**：

1. 验证患者身份
2. 更新患者完整信息
3. 创建就诊记录
4. 生成账单

#### 4.2.3 管理后台统计

**API端点**：`GET /api/admin/dashboard`

**返回数据**：

- 今日就诊人次：129
- 今日收入：¥46,120
- 候诊人数：19
- 在班医生数：21

#### 4.2.4 就诊趋势图表

**API端点**：`GET /api/admin/statistics?type=daily`

**图表实现**：

- 使用纯CSS实现柱状图
- 无需第三方图表库
- 响应式设计

### 4.3 前端界面设计

#### 4.3.1 设计风格

- 现代化商务风格
- 渐变蓝色主题
- 卡片式布局
- 响应式设计

#### 4.3.2 技术特点

- 原生JavaScript,无框架依赖
- CSS3动画效果
- Fetch API异步请求
- 移动端适配

---

## 五、系统测试

### 5.1 功能测试

#### 5.1.1 患者预约功能测试

| 测试项   | 测试步骤           | 预期结果              | 实际结果 |
| -------- | ------------------ | --------------------- | -------- |
| 正常预约 | 填写完整信息并提交 | 预约成功,生成预约记录 | ✅ 通过  |
| 信息验证 | 姓名或电话为空     | 提示必填项            | ✅ 通过  |
| 预约查询 | 输入姓名+电话查询  | 显示预约列表          | ✅ 通过  |

#### 5.1.2 前台接待功能测试

| 测试项   | 测试步骤       | 预期结果     | 实际结果 |
| -------- | -------------- | ------------ | -------- |
| 患者搜索 | 输入姓名或电话 | 显示患者列表 | ✅ 通过  |
| 预约验证 | 选择预约记录   | 自动填充信息 | ✅ 通过  |
| 就诊登记 | 提交完整信息   | 创建就诊记录 | ✅ 通过  |
| 费用结算 | 选择支付方式   | 更新账单状态 | ✅ 通过  |

#### 5.1.3 管理后台功能测试

| 测试项   | 测试步骤      | 预期结果     | 实际结果 |
| -------- | ------------- | ------------ | -------- |
| 数据统计 | 加载仪表盘    | 显示实时数据 | ✅ 通过  |
| 就诊趋势 | 查看本周图表  | 显示7天数据  | ✅ 通过  |
| 员工管理 | 添加/编辑员工 | 成功保存     | ✅ 通过  |
| 排班管理 | 安排医生排班  | 生成排班记录 | ✅ 通过  |

### 5.2 性能测试

#### 5.2.1 响应时间测试

| 接口                       | 平均响应时间 | 测试结果  |
| -------------------------- | ------------ | --------- |
| /api/patient/appointment   | 82ms         | ✅ 优秀   |
| /api/receptionist/register | 125ms        | ✅ 良好   |
| /api/admin/dashboard       | 156ms        | ✅ 良好   |
| /api/admin/statistics      | 203ms        | ✅ 可接受 |

### 5.3 兼容性测试

| 浏览器  | 版本        | 测试结果      |
| ------- | ----------- | ------------- |
| Chrome  | 120+        | ✅ 完全兼容   |
| Edge    | 120+        | ✅ 完全兼容   |
| Firefox | 121+        | ✅ 完全兼容   |
| Safari  | 17+         | ✅ 完全兼容   |
| 移动端  | iOS/Android | ✅ 响应式适配 |

### 5.4 网络访问测试

**测试环境**：

- 服务器：Windows 11,IP: 172.28.18.205
- 客户端：手机/笔记本,连接同一WiFi

**测试结果**：✅ 多设备访问成功

---

## 七、项目总结

### 7.1 完成情况

✅ **已完成功能**：

1. 数据库设计与实现(9张表,完整关系约束)
2. 后端API开发(17个核心接口)
3. 前端界面实现(4个主要页面)
4. 数据可视化(本周就诊趋势图)
5. 局域网多设备访问
6. 测试数据生成(100+患者,129条就诊记录)

### 7.2 技术亮点

1. **纯CSS图表实现** - 轻量级,加载快,响应式
2. **RESTful API设计** - 统一JSON响应,清晰错误处理
3. **数据库优化** - 合理索引,外键约束,规范化设计
4. **现代化UI设计** - 渐变色商务风格,卡片式布局

### 7.3 遇到的问题及解决方案

#### 问题1：MySQL密码配置问题

**解决方案**：改用SQLite数据库,简化部署流程

#### 问题2：局域网访问被防火墙阻止

**解决方案**：配置Flask监听所有地址(host='0.0.0.0'),临时关闭防火墙

#### 问题3：前端图表实现选择

**解决方案**：采用纯CSS+JavaScript实现,减少依赖

### 7.4 改进方向

1. **用户认证系统** - 添加JWT token认证,实现角色权限控制
2. **更丰富的数据分析** - 科室分布统计,医生工作量分析
3. **数据库优化** - 考虑迁移到MySQL/PostgreSQL
4. **前端优化** - 引入Vue.js等现代框架
5. **部署优化** - 使用Docker容器化,配置Nginx

### 7.5 学习收获

1. **数据库设计能力提升** - 掌握E-R图设计,理解规范化理论
2. **Web开发实践经验** - Flask框架使用,RESTful API设计
3. **项目管理能力** - Git版本控制,需求分析与系统设计
4. **问题解决能力** - 网络配置调试,跨平台兼容性处理

---

## 八、附录

### 8.1 项目文件结构

```
hospital_system/
├── app.py                  # Flask主程序
├── hospital.db             # SQLite数据库
├── init_sqlite.py          # 数据库初始化脚本
├── insert_sample_data.py   # 测试数据生成
├── requirements.txt        # Python依赖
├── 启动系统.bat            # Windows快速启动
├── templates/              # HTML模板
│   ├── index.html         # 主页
│   ├── patient.html       # 患者预约
│   ├── receptionist.html  # 前台接待
│   └── admin.html         # 管理后台
├── README.md              # 项目说明
├── 实验报告模板.md         # 本报告
└── PPT演示大纲.md         # PPT大纲
```

### 8.2 运行说明

#### 环境要求

- Python 3.8+
- SQLite 3

#### 安装步骤

```bash
# 1. 克隆项目
git clone https://github.com/Lihua-Githu/hospital-management-system.git

# 2. 安装依赖
pip install -r requirements.txt

# 3. 初始化数据库
python init_sqlite.py

# 4. 生成测试数据(可选)
python insert_sample_data.py

# 5. 启动服务器
python app.py
```

#### 访问地址

- 本地访问：http://localhost:5000
- 局域网访问：http://[本机IP]:5000

### 8.3 参考资料

1. Flask官方文档：https://flask.palletsprojects.com/
2. SQLite官方文档：https://www.sqlite.org/docs.html
3. 数据库系统概念(第7版),Abraham Silberschatz等著

---

**报告完成日期**：2026年1月14日
**项目GitHub地址**：https://github.com/Lihua-Githu/hospital-management-system

---

|  |  |  |  |
| :- | - | - | - |

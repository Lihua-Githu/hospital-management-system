# 社区医院门诊管理系统

## 项目简介

这是一个基于 **MySQL + Python Flask + HTML** 的社区医院门诊管理系统，实现了患者预约挂号、现场就诊登记、费用结算、病历管理等全流程数字化管理功能。

### 系统功能

#### 1. 患者服务

- ✅ 在线预约挂号
- ✅ 到院登记就诊
- ✅ 预约信息查询
- ✅ 科室信息浏览

#### 2. 前台管理

- ✅ 患者到院登记
- ✅ 预约信息处理
- ✅ 费用结算与收费
- ✅ 就诊状态管理
- ✅ 患者信息查看

#### 3. 管理后台

- ✅ 医生排班管理
- ✅ 收入统计分析（按日期/科室/医生）
- ✅ 患者详细信息查询
- ✅ 员工信息管理
- ✅ 数据报表生成

## 技术栈

- **数据库**: MySQL 8.0+
- **后端**: Python 3.8+ / Flask 3.0
- **前端**: HTML5 + CSS3 + JavaScript (原生)
- **数据库驱动**: PyMySQL 1.1.0

## 系统架构

```
hospital_system/
├── app.py                 # Flask应用主程序
├── requirements.txt       # Python依赖包
├── database/
│   ├── schema.sql        # 数据库表结构
│   └── ER-design.md      # E-R图设计文档
├── templates/            # HTML模板
│   ├── index.html       # 首页
│   ├── patient.html     # 患者页面
│   ├── receptionist.html # 前台页面
│   └── admin.html       # 管理员页面
└── static/              # 静态资源（可选）
```

## 数据库设计

### 核心数据表

1. **department** - 科室表
2. **employee** - 员工表（医生、护士、行政人员）
3. **clinic_room** - 诊室表
4. **doctor_schedule** - 医生排班表
5. **patient** - 患者信息表
6. **appointment** - 预约信息表
7. **visit** - 就诊信息表
8. **billing** - 费用结算表
9. **revenue_summary** - 收入统计表
10. **system_user** - 系统用户表

### E-R图说明

详见 `database/ER-design.md` 文件，包含完整的实体关系设计和第三范式说明。

## 安装部署

### 1. 环境要求

- Python 3.8 或更高版本
- MySQL 8.0 或更高版本
- pip 包管理工具

### 2. 安装步骤

#### (1) 克隆或下载项目

```bash
cd hospital_system
```

#### (2) 安装Python依赖

```bash
pip install -r requirements.txt
```

#### (3) 配置数据库

1. 启动MySQL服务
2. 创建数据库并导入结构：

```bash
mysql -u root -p < database/schema.sql
```

或者在MySQL客户端中执行：

```sql
source database/schema.sql
```

#### (4) 修改数据库配置

编辑 `app.py` 文件中的数据库配置：

```python
DB_CONFIG = {
    'host': 'localhost',
    'user': 'root',          # 修改为你的MySQL用户名
    'password': 'your_password',  # 修改为你的MySQL密码
    'database': 'hospital_management',
    'charset': 'utf8mb4'
}
```

#### (5) 启动应用

```bash
python app.py
```

应用将在 `http://localhost:5000` 启动

### 3. 测试账号

系统已内置测试账号（密码都是：123456）：

- **管理员**: `admin` / `123456`
- **前台**: `receptionist` / `123456`
- **患者**: `patient_demo` / `123456`

## 使用说明

### 患者端操作流程

1. 访问首页 → 点击"患者服务"
2. 填写预约信息（姓名、电话、科室、时间）
3. 提交预约，记录预约编号
4. 到院后由前台验证预约信息并登记

### 前台端操作流程

1. 访问首页 → 点击"前台系统"
2. **患者登记**: 输入患者信息和预约编号（如有）
3. **就诊管理**: 查看当天就诊患者列表
4. **费用结算**: 选择患者，输入费用信息，完成收费

### 管理员操作流程

1. 访问首页 → 点击"管理后台"
2. **数据概览**: 查看今日统计数据
3. **收入统计**: 按日期/科室/医生查询收入
4. **患者查询**: 搜索患者详细信息
5. **排班管理**: 为医生安排出诊时间

## 功能演示

### 核心功能测试流程

#### 完整就诊流程演示

1. **患者预约** → 在患者页面填写预约信息
2. **前台登记** → 在前台页面根据预约编号登记
3. **就诊管理** → 查看就诊列表，更新状态
4. **费用结算** → 输入费用信息，完成缴费
5. **数据统计** → 在管理后台查看统计数据

#### 查询统计功能演示

1. 收入统计（按日期、科室、医生）
2. 患者信息查询
3. 员工信息管理
4. 排班信息查询

## 项目特色

### 1. 完整的数据库设计

- 满足第三范式要求
- 完善的外键约束和索引
- 合理的数据冗余处理

### 2. 用户友好的界面

- 响应式设计，支持移动端
- 渐变色彩方案，视觉美观
- 清晰的操作流程引导

### 3. 功能完备性

- 覆盖所有实验要求的功能点
- 完整的数据流转
- 实时的状态更新

### 4. 代码规范

- 清晰的代码注释
- 模块化的功能设计
- RESTful API设计

## 完整性约束

系统实现了以下完整性约束：

### 1. 实体完整性

- 所有表均设置主键
- 主键自增，保证唯一性

### 2. 参照完整性

- 外键约束确保关联数据一致性
- 级联操作处理关联数据

### 3. 用户定义完整性

- 枚举类型限制状态值
- 检查约束确保数据合理性
- 唯一约束防止重复数据

### 4. 业务完整性

- 预约时间不能早于当前时间
- 费用金额必须为正数
- 排班时间不能冲突

## 扩展功能建议

- [ ] 添加用户登录验证
- [ ] 实现医生诊断记录功能
- [ ] 添加药品库存管理
- [ ] 实现短信/邮件通知
- [ ] 添加数据图表可视化
- [ ] 实现报表导出功能（PDF/Excel）
- [ ] 添加系统日志记录
- [ ] 实现权限细粒度控制

## 常见问题

### Q1: 数据库连接失败？

**A**: 检查MySQL服务是否启动，以及 `app.py` 中的数据库配置是否正确。

### Q2: 页面显示乱码？

**A**: 确保数据库和表的字符集设置为 `utf8mb4`。

### Q3: 无法创建预约？

**A**: 检查科室表是否有数据，确保示例数据已正确导入。

### Q4: 统计数据为空？

**A**: 需要先有完整的就诊和结算记录，才能产生统计数据。

## 开发团队

- 项目开发：江秉城 江思宇 罗一轩
- 指导教师：张亮 副教授
- 学校：中山大学 网络空间安全学院

## 许可证

本项目仅用于教学目的，未经允许不得用于商业用途。

---

**开发时间**: 2026年1月
**最后更新**: 2026年1月14日
